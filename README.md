# ЯвКурсі — Dashboard відключень (svitlo_live proxy)

Це **статична HTML-сторінка**, яку можна задеплоїти на **GitHub Pages**. Вона показує 3 графіки (півгодинні слоти на **сьогодні** та **завтра**):

- **Київ, черга 6.1** (верхній великий графік, підписаний *ЯвКурсі*)
- **Бровари, черга 3.1** (Дім — світло)
- **Бровари, черга 1.2** (Дім — вода)

## Звідки беруться дані

Сторінка спершу пробує завантажити JSON напряму з:

- `https://svitlo-proxy.svitlo-proxy.workers.dev/`

Це публічний проксі, який використовується інтеграцією `svitlo_live` для Home Assistant і ховає API-key. (Деталі описані в README репозиторію `chaichuk/svitlo_live`.)

Якщо браузер блокує доступ (CORS) — сторінка автоматично переходить на **локальний кеш**:

- `./data/svitlo_proxy_cache.json`

Цей кеш може оновлювати **GitHub Action раз на годину** (безкоштовно для публічного репозиторію).

---

## Як задеплоїти на GitHub Pages (файли в корені)

1. Відкрий репозиторій на GitHub.
2. Натисни **Add file → Upload files**.
3. Завантаж **вміст цього архіву** так, щоб `index.html` лежав **в корені репозиторію** (не в папці).
4. Settings → **Pages**:
   - Source: `Deploy from a branch`
   - Branch: `main`
   - Folder: `/ (root)`
5. Зачекай 1–2 хв і відкрий:
   - `https://<username>.github.io/<repo>/`

---

## (Опціонально) Увімкнути автооновлення даних раз на годину через GitHub Actions

Файл workflow уже підготовлений: `.github/workflows/update-data.yml`

Щоб він запрацював:

1. Переконайся, що репозиторій **Public** (або в тебе є квоти Actions для Private).
2. Settings → Actions → General:
   - **Workflow permissions**: `Read and write permissions` (щоб бот міг комітити кеш)
3. Actions → знайди workflow **Update outage data cache** → Run workflow (перший запуск вручну).

Після цього в репозиторії буде оновлюватись `data/svitlo_proxy_cache.json`, а сторінка завжди матиме актуальні дані навіть якщо CORS/проксі «підвис».

---

## Налаштування черг/міст

У файлі `app.js` є `CONFIG_DEFAULT`:

```js
queue: "6.1",
regionHints: ["Київ", "Kyiv", "м.Київ"],
```

Якщо формат JSON зміниться і графік не знайдеться — дивись блок **«Діагностика»** внизу сторінки (він показує, чи знайдено графік).

> Якщо треба — зроблю наступну версію з UI-вибором області/черги прямо на сторінці (без редагування коду).
